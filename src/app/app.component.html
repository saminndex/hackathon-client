<div class="outer-container">
  <div class="language-fab" (click)="openLanguageSelector()" *ngIf="!loading">
    {{ selectedLanguage.emoji }}
  </div>

  <div style="display: flex; justify-content: space-between">
    <p style="color: rgb(255, 255, 255); margin: 0px">The Infinite Story</p>
  </div>

  <div class="pending-container" *ngIf="!chapter">
    <button
      (click)="generate()"
      [disabled]="loading"
      *ngIf="!chapter && !loading"
      id="pulse-button"
    >
      <span style="display: flex; align-items: center"
        ><img
          src="../assets/magic-wand.png"
          width="25"
          height="25"
          style="margin-right: 10px" /></span
      >{{ l18n("generateStory") }}
    </button>

    <loader [loading]="loading" [language]="selectedLanguage"></loader>
  </div>

  <div class="centered-container" *ngIf="chapter">
    <p id="chapter">{{ l18n("chapter") }} {{ currentChapter }}</p>
    <p id="title">{{ title }}</p>

    <div class="image-overlay-container">
      <img class="story-image" *ngIf="image" [src]="image" />
      <ng-lottie
        class="lottie-animation"
        [options]="options"
        *ngIf="isPlaying"
      ></ng-lottie>
      <button
        class="play-button"
        id="pulse-button"
        *ngIf="!isPlaying"
        (click)="togglePlayPause()"
      >
        {{ l18n("play") }}
      </button>
    </div>

    <p id="content" *ngIf="chapter?.content">{{ chapter.content }}</p>

    <div
      style="
        display: flex;
        justify-content: space-evenly;
        width: 100%;
        margin-bottom: 40px;
      "
    >
      <div class="option-container">
        <p
          id="chapter"
          [class.selectableA]="canSelectOption"
          (click)="selectOption(0)"
        >
          {{ l18n("optionA") }}
        </p>
        <p id="content" style="margin-top: 10px">{{ chapter.optionA }}</p>
      </div>

      <div class="option-container">
        <p
          id="chapter"
          [class.selectableB]="canSelectOption"
          (click)="selectOption(1)"
        >
          {{ l18n("optionB") }}
        </p>
        <p id="content" style="margin-top: 10px">{{ chapter.optionB }}</p>
      </div>
    </div>
  </div>
</div>
